paths:
  raw_data: "/data/raw"
  processed_data: "/data/processed"
  metadata: "/data/metadata"
  logs: "logs"
  checkpoints: "checkpoints"

# Data Sources
data_sources:
  # CSV NOAA (exemple - à adapter selon votre dataset)
  csv:
    enabled: true
    path: "data/raw/noaa_weather_data.csv"
    encoding: "utf-8"
    delimiter: ","
    
  # API Météo (Open-Meteo gratuite sans clé API)
  api:
    enabled: true
    base_url: "https://api.open-meteo.com/v1/forecast"
    # Exemple de paramètres pour Paris
    default_params:
      latitude: 48.8566
      longitude: 2.3522
      hourly: "temperature_2m,relativehumidity_2m,precipitation,windspeed_10m"
      timezone: "Europe/Paris"
    timeout: 30
    retry_attempts: 3
    retry_delay: 5

# NOAA API Configuration
noaa:
  # Obtenir un token gratuit sur: https://www.ncdc.noaa.gov/cdo-web/token
  # OU définir la variable d'environnement: NOAA_API_TOKEN
  api_token: "YOUR_TOKEN"  # Remplacer par votre token ou utiliser une variable d'environnement
  base_url: "https://www.ncei.noaa.gov/cdo-web/api/v2/data"
  dataset_id: "GHCND"
  station_id: "GHCND:USW00094728"  # JFK Airport, NY
  start_date: "2020-01-01"
  end_date: "2024-12-31"

# Spark Configuration
spark:
  app_name: "WeatherProject-DataLake"
  master: "local[*]"  # Mode local - utilise tous les cores disponibles
  config:
    spark.sql.shuffle.partitions: 4
    spark.driver.memory: "2g"
    spark.executor.memory: "2g"
    spark.sql.adaptive.enabled: true
    spark.sql.adaptive.coalescePartitions.enabled: true

# Processing Configuration
processing:
  # Colonnes à conserver après nettoyage
  columns_mapping:
    date: "date"
    temperature: "temperature"
    humidity: "humidity"
    precipitation: "precipitation"
    wind_speed: "wind_speed"
  
  # Règles de validation
  validation:
    temperature_min: -60  # Celsius
    temperature_max: 60
    humidity_min: 0       # %
    humidity_max: 100
    precipitation_min: 0  # mm
    wind_speed_min: 0     # km/h

# Persistence Configuration
persistence:
  format: "parquet"
  compression: "snappy"
  partition_by: ["year", "month"]
  mode: "append"  # append, overwrite, ignore, error

# Dashboard Configuration
dashboard:
  host: "0.0.0.0"
  port: 5000
  debug: true
  
  # Villes disponibles pour l'analyse
  cities:
    - name: "Paris"
      latitude: 48.8566
      longitude: 2.3522
    - name: "Lyon"
      latitude: 45.7640
      longitude: 4.8357
    - name: "Marseille"
      latitude: 43.2965
      longitude: 5.3698
    - name: "Toulouse"
      latitude: 43.6047
      longitude: 1.4442
    - name: "Nice"
      latitude: 43.7102
      longitude: 7.2620

  # Configuration des graphiques
  charts:
    default_theme: "plotly_white"
    color_scheme: ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd"]

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  file_output: true
  console_output: true

# Ingestion Configuration
ingestion:
  batch_size: 10000
  checkpoint_enabled: true
  checkpoint_interval: 1000  # Sauvegarder tous les 1000 enregistrements
  error_tolerance: 0.05      # 5% d'erreurs tolérées
  
  # Métadonnées à tracker
  metadata_fields:
    - ingestion_timestamp
    - source_type
    - records_count
    - records_valid
    - records_invalid
    - file_size_mb
    - processing_duration_seconds
    - data_quality_score

# Analysis Configuration
analysis:
  # Agrégations à calculer
  aggregations:
    - type: "daily"
      metrics: ["mean", "min", "max", "std"]
    - type: "monthly"
      metrics: ["mean", "min", "max"]
    - type: "seasonal"
      metrics: ["mean"]
  
  # Périodes d'analyse
  time_periods:
    - "last_7_days"
    - "last_30_days"
    - "last_90_days"
    - "last_year"
    - "all_time"

