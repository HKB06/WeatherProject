paths:
  raw_data: "/data/raw"
  processed_data: "/data/processed"
  metadata: "/data/metadata"
  logs: "logs"
  checkpoints: "checkpoints"

# Data Sources
data_sources:
  # API Open-Meteo (gratuite, sans clé API)
  api:
    enabled: true
    base_url: "https://api.open-meteo.com/v1/forecast"
    # Villes de la Côte d'Azur
    cities:
      - name: "Nice"
        latitude: 43.7102
        longitude: 7.2620
      - name: "Cannes"
        latitude: 43.5528
        longitude: 7.0174
      - name: "Monaco"
        latitude: 43.7384
        longitude: 7.4246
      - name: "Antibes"
        latitude: 43.5808
        longitude: 7.1251
      - name: "Menton"
        latitude: 43.7747
        longitude: 7.4951
    timeout: 30
    retry_attempts: 3
    retry_delay: 5

# Spark Configuration
spark:
  app_name: "WeatherProject-DataLake"
  master: "local[*]"  # Mode local - utilise tous les cores disponibles
  config:
    spark.sql.shuffle.partitions: 4
    spark.driver.memory: "2g"
    spark.executor.memory: "2g"
    spark.sql.adaptive.enabled: true
    spark.sql.adaptive.coalescePartitions.enabled: true

# Processing Configuration
processing:
  # Colonnes à conserver après nettoyage
  columns_mapping:
    date: "date"
    temperature: "temperature"
    humidity: "humidity"
    precipitation: "precipitation"
    wind_speed: "wind_speed"
  
  # Règles de validation
  validation:
    temperature_min: -60  # Celsius
    temperature_max: 60
    humidity_min: 0       # %
    humidity_max: 100
    precipitation_min: 0  # mm
    wind_speed_min: 0     # km/h

# Persistence Configuration
persistence:
  format: "parquet"
  compression: "snappy"
  partition_by: ["year", "month"]
  mode: "append"  # append, overwrite, ignore, error

# Dashboard Configuration
dashboard:
  host: "0.0.0.0"
  port: 5000
  debug: true
  
  # Villes disponibles pour l'analyse (Côte d'Azur)
  cities:
    - name: "Nice"
      latitude: 43.7102
      longitude: 7.262
    - name: "Cannes"
      latitude: 43.5513
      longitude: 7.0128
    - name: "Monaco"
      latitude: 43.7384
      longitude: 7.4246
    - name: "Antibes"
      latitude: 43.5808
      longitude: 7.1251
    - name: "Menton"
      latitude: 43.7766
      longitude: 7.4951

  # Configuration des graphiques
  charts:
    default_theme: "plotly_white"
    color_scheme: ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd"]

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  file_output: true
  console_output: true

# Ingestion Configuration
ingestion:
  batch_size: 10000
  checkpoint_enabled: true
  checkpoint_interval: 1000  # Sauvegarder tous les 1000 enregistrements
  error_tolerance: 0.05      # 5% d'erreurs tolérées
  
  # Métadonnées à tracker
  metadata_fields:
    - ingestion_timestamp
    - source_type
    - records_count
    - records_valid
    - records_invalid
    - file_size_mb
    - processing_duration_seconds
    - data_quality_score

# Analysis Configuration
analysis:
  # Agrégations à calculer
  aggregations:
    - type: "daily"
      metrics: ["mean", "min", "max", "std"]
    - type: "monthly"
      metrics: ["mean", "min", "max"]
    - type: "seasonal"
      metrics: ["mean"]
  
  # Périodes d'analyse
  time_periods:
    - "last_7_days"
    - "last_30_days"
    - "last_90_days"
    - "last_year"
    - "all_time"

